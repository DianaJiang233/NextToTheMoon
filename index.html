<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Moon Diary with Goose</title>
<link href="https://fonts.googleapis.com/css2?family=Handjet:wght@200&display=block" rel="stylesheet">
  <style>
    body { background: #000000; color: white; font-family: 'Handjet', cursive;; text-align: center; padding: 20px; }
    #moon { width: 300px; cursor: pointer; margin-top: 30px; }
h2 {
  font-size: 33px; /* â† ä½ æƒ³è¦å¤šå¤§å°±å†™å¤šå°‘ï¼Œæ¯”å¦‚ 18pxã€32px éƒ½å¯ä»¥ */
  font-family: 'Handjet', cursive; /* ä¿æŒé£æ ¼ä¸€è‡´ */
}

#myDiaryBox {
  background: rgba(255,255,255,0.1);
  padding: 15px;
  border-radius: 10px;
  min-height: 150px;
  font-size: 20px;
  width: 400px;
  position: fixed;
  top: 550px;
  left: 70%;
      font-family: 'Handjet', cursive;
  //transform: translateY(-50%);
}

/* è‡ªå·±çš„ gif */
#myGif {
   width: 200px;
  transition: transform 0.2s ease;
  position: fixed;
  top: 350px;
  left: 76%;
}
    textarea {
     width: 100%;     /* æ’‘æ»¡çˆ¶å®¹å™¨ */
  height: 150px;
  font-size: 25px;
  //padding: 15px;    /* ä½ æƒ³è¦çš„å†…è¾¹è·åœ¨è¿™è®¾ç½® */
  border-radius: 10px;
      font-family: 'Handjet', cursive;
  border: none;
  box-sizing: border-box; /* ğŸ‘ˆ ä¿è¯ padding ä¸å½±å“å®½åº¦ */
  background: transparent; /* å¯é€‰ï¼šè·Ÿçˆ¶å®¹å™¨èä¸ºä¸€ä½“ */
  color: white;    }
    //#friendZone {
      margin-top: 30px;
    }
    #friendDiary {
  background: rgba(255,255,255,0.1);
  padding: 15px;
  border-radius: 10px;
  min-height: 150px;
  font-size: 25px;
  width: 400px;
      font-family: 'Handjet', cursive;
  position: fixed;
  top: 550px;
  left: 10%;
  text-align: left;
}

/* å°é¹…çš„ gif */
#gooseGif {
  width: 200px;
  transition: transform 0.2s ease;
  position: fixed;
  top: 350px;
  left: 16%;
}
  </style>
</head>
<body>

<img id="moon" src="https://dianajiang233.github.io/GooseSing/moon.gif" alt="Moon" />
<img id="myGif" src="https://dianajiang233.github.io/GooseSing/mydiary.gif" alt="You" />
<div id="myDiaryBox">
  <textarea id="myDiary" placeholder="Type here..."></textarea>
</div>
<div id="friendZone">
  <h2>You and Goose write together, <span id="moonWhisper" style="opacity: 0; transition: opacity 0.8s;">
    because tonight the Moon listens
  </span></h2>
  <img id="gooseGif" src="https://dianajiang233.github.io/GooseSing/goosewrite.gif" alt="Goose">
  <div id="friendDiary"></div>
</div>
<div id="goodbyeOverlay" style="
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background: black;
  color: white;
  font-size: 40px;
  font-family: 'Handjet', cursive;
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  pointer-events: none;
  transition: opacity 2s ease;
  z-index: 9999;
">
  The goose is going to sleep, and so are you.
</div>

<script>
  const moon = document.getElementById('moon');
moon.addEventListener('mouseenter', () => {
    moon.src = 'https://dianajiang233.github.io/GooseSing/moonlight.gif'; // å‘å…‰åŠ¨å›¾
  });

  moon.addEventListener('mouseleave', () => {
    moon.src = 'https://dianajiang233.github.io/GooseSing/moon.gif'; // åŸå›¾
  });
const moonQuotes = [
  "ğŸŒ• The moon whispered: 'I only disappear to rest my glow. When I appear, I hope you keep talking to me.'",
  "ğŸŒ• The moon said: 'I see everything, but I speak only to those who write.'",
  "ğŸŒ• The moon hummed softly: 'Even the stars listen when you dream.'",
  "ğŸŒ• The moon blinked slowly: 'Clouds are just my sighs. Is your diary your exclamation, or your sigh?'",
  "ğŸŒ• The moon murmured: 'Tonight, I carry your words to the tides.'",
 "ğŸŒ• The moon murmured: 'Your words may vanish on paper, but they echo in my light.'",
 "ğŸŒ• The moon murmured: 'When no one else listens, I still do.'",
 "ğŸŒ• The moon murmured: 'You think youâ€™re writing alone, but Iâ€™m always just above.'",
];

moon.addEventListener('click', () => {
  const diaryText = myDiary.value.trim();

  if (diaryText === "") {
    alert("Your diary is empty.");
    return;
  }

  // éšæœºä¸€å¥æœˆäº®çš„è¯
  const moonLine = moonQuotes[Math.floor(Math.random() * moonQuotes.length)];

  // å½“å‰æ—¥æœŸ
  const date = new Date();
  const formattedDate = `ğŸ—“ï¸ ${date.getFullYear()}/${date.getMonth() + 1}/${date.getDate()}`;

  // æ‹¼æ¥æœ€ç»ˆæ–‡æœ¬
  const finalText = `${formattedDate}\n${moonLine}\n\n${diaryText}`;

  // ä¸‹è½½é€»è¾‘
  const blob = new Blob([finalText], { type: "text/plain" });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = 'moon_note.txt';
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
  URL.revokeObjectURL(url);
});
  const diaryModal = document.getElementById('diaryModal');
  const myDiary = document.getElementById('myDiary');
  const friendDiary = document.getElementById('friendDiary');
  const gooseGif = document.getElementById('gooseGif');


  // å°é¹…çš„å¤šä¸ªæ—¥è®°æ± 
  const gooseDiaryPool = [
    "Sometimes the moon is full, sometimes it is crescentâ€”because it breathes in clouds and breathes them back out...",
    
    "Sometimes I think about the clouds and whether they get lonely up there, wandering without ever touching the ground. Maybe that's why it rainsâ€”because they miss us, and the Earth hugs them back with rivers and lakes.",
    
    "If dreams are seeds, maybe tonight I planted a forest. One filled with fireflies, silver rivers, and endless soft grass where no one ever feels alone.",
    
    "I watched a single leaf fall tonight. It spun and floated and danced before it touched the earth. I wonder if wishes fall the same wayâ€”quiet, unnoticed, but still real.",
    
    "Tonight, everything feels still. Even the stars seem to hold their breath. I wonder if somewhere, someone else is staring at the same sky, wishing on the same silent dreams.",
"Tonight I saw my reflection in the lake. For a moment, I thought I was the moon, just rounder and fluffier.",
"I tried to count all the stars tonight, but I kept losing track after ten. Maybe thatâ€™s the skyâ€™s way of saying: just feel it, donâ€™t measure it.",
"I wrote a poem in the dirt with my beak, but the wind came and read it too fast. I hope it liked it.",
"The moon whispered something to me, but I only caught the first word: 'come.' I'm not sure where it wants me to go, but I packed a feather just in case.",
"Today I walked in circles for an hour. Not because I was lost, but because I liked the way the wind hugged me from every side.",
  ];

  // æ¯æ¬¡æ‰“å¼€éšæœºæŠ½ä¸€ç¯‡
  const gooseFullText = gooseDiaryPool[Math.floor(Math.random() * gooseDiaryPool.length)];
  
  let gooseCurrentIndex = 0;
    let typingTimer;

 
  myDiary.addEventListener('input', () => {
    if (gooseCurrentIndex < gooseFullText.length) {
      friendDiary.textContent += gooseFullText[gooseCurrentIndex];
      gooseCurrentIndex++;
    }

    // Goose shakes a bit when typing
    gooseGif.style.transform = 'rotate(-5deg)';
    setTimeout(() => {
      gooseGif.style.transform = 'rotate(5deg)';
    }, 100);
    setTimeout(() => {
      gooseGif.style.transform = 'rotate(0deg)';
    }, 200);

  // YOU also shake!
  myGif.style.transform = 'rotate(-5deg)';
  setTimeout(() => {
    myGif.style.transform = 'rotate(5deg)';
  }, 100);
  setTimeout(() => {
    myGif.style.transform = 'rotate(0deg)';
  }, 200);
  });

const moonWhisper = document.getElementById('moonWhisper');

moon.addEventListener('mouseenter', () => {
  moon.src = 'https://dianajiang233.github.io/GooseSing/moonlight.gif';
  moonWhisper.style.opacity = 1;
});

moon.addEventListener('mouseleave', () => {
  moon.src = 'https://dianajiang233.github.io/GooseSing/moon.gif';
  moonWhisper.style.opacity = 0;
});

  function checkAndReturnHome() {
  const now = new Date();
  const hours = now.getHours();
  const minutes = now.getMinutes();

  if (!(hours === 17 && minutes >= 1 && minutes <= 36)) {
    const overlay = document.getElementById('goodbyeOverlay');
    overlay.style.pointerEvents = 'auto';
    overlay.style.opacity = 1;

    // 5 ç§’åè·³è½¬
    setTimeout(() => {
      window.location.href = "https://dianajiang233.github.io/FarmRidge/";
    }, 5000);
  }
}


  // æ£€æŸ¥ä¸€æ¬¡
  checkAndReturnHome();
  // æ¯20ç§’æ£€æŸ¥ä¸€æ¬¡
  setInterval(checkAndReturnHome, 20000);


</script>
</body>
</html>
